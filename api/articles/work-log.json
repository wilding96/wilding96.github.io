{"title":"work-log","uid":"d14f1b56244a23ff94e44d5f440a2776","slug":"work-log","date":"2023-04-13T03:20:03.000Z","updated":"2023-04-14T03:23:27.567Z","comments":true,"path":"api/articles/work-log.json","keywords":null,"cover":[],"content":"<p><em>最近整体架构变动中需要把某一个Vue项目（后面简称B项目）的部分内容迁移到项目A中，其中包含多个页面和功能，在此记录下。</em></p>\n<h3 id=\"先整体分析下有哪些内容需要迁移过来，大致思路是迁移页面的\"><a href=\"#先整体分析下有哪些内容需要迁移过来，大致思路是迁移页面的\" class=\"headerlink\" title=\"先整体分析下有哪些内容需要迁移过来，大致思路是迁移页面的\"></a>先整体分析下有哪些内容需要迁移过来，大致思路是迁移页面的</h3><p><strong>–&gt;路由模块<br>–&gt;页面内容<br>–&gt;依赖相关<br>–&gt;静态资源<br>–&gt;配置相关</strong></p>\n<p>下面开始开干，先从路由开始入手</p>\n<h4 id=\"1-router-路由模块\"><a href=\"#1-router-路由模块\" class=\"headerlink\" title=\"1.router 路由模块\"></a>1.router 路由模块</h4><p>现在市面上流行的vue-admin等模板工程基本都有以下配置</p>\n<p><img src=\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5f83fb73be6442029773612c6496ae7a~tplv-k3u1fbpfcp-watermark.image\" alt=\"image.png\"></p>\n<p><img src=\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2292085fa6504c2291cae345decac6ab~tplv-k3u1fbpfcp-watermark.image\" alt=\"image.png\"></p>\n<p>*简单解释下就是会自动解析router&#x2F;modules目录下的以js为后缀的文件，并以异步路由形式导出便于动态加载路由内容，通俗来说就是分模块归类路由文件 *</p>\n<p>所以我们在A项目的src&#x2F;router&#x2F;modules&#x2F;下面新建我们迁移的页面路由内容，这里说一下，这是后台系统，路由应该是从接口数据返回动态加载到全局的router里面，现在具体方案还没定，而且利于说明，这里直接把对应路由内容手动加载。如下图：</p>\n<p><img src=\"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/85bf751b892e4c8986c642fd48b1bee9~tplv-k3u1fbpfcp-watermark.image\" alt=\"image.png\"></p>\n<p>然后就可以进行下一步页面内容的迁移了。</p>\n<h4 id=\"2-views页面内容\"><a href=\"#2-views页面内容\" class=\"headerlink\" title=\"2.views页面内容\"></a>2.views页面内容</h4><p>这一步直接把B项目需要迁移的页面内容复制到A项目views文件夹下面即可，如下图</p>\n<p><img src=\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/51058d63fc774de1b3169c733a7c0bc1~tplv-k3u1fbpfcp-watermark.image\" alt=\"image.png\"></p>\n<p>view里面的内容迁移过之后还需要把用到的components也同样从B项目复制到A项目的components文件夹下哦~</p>\n<p>此时如果项目已经在运行的话，已经会有错误报出，xxx is undefined 或者 not found 即缺少页面内容所需要的依赖，这就到了我们常见的vue项目运行问题中的场景，也就到了下一步，处理项目依赖相关问题。</p>\n<h4 id=\"3-依赖相关\"><a href=\"#3-依赖相关\" class=\"headerlink\" title=\"3.依赖相关\"></a>3.依赖相关</h4><p><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0643d8c9330f4472838502047e28d97e~tplv-k3u1fbpfcp-watermark.image\" alt=\"image.png\"><br>在控制台中出现xxx未找到 或者已经提示需要npm install xxx之后，我们就可以按照提示进行相关依赖的安装，根据自己情况使用npm&#x2F;cnpm&#x2F;pnpm安装缺少的依赖即可。</p>\n<p>安装好依赖，重新npm run dev编译，接下来可能会出现类型下图的报错</p>\n<h4 id=\"4-静态资源\"><a href=\"#4-静态资源\" class=\"headerlink\" title=\"4.静态资源\"></a>4.静态资源</h4><p><img src=\"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8070169e918e42ed8c11af15a922a0f7~tplv-k3u1fbpfcp-watermark.image\" alt=\"image.png\"></p>\n<p>这种就是静态资源路径访问有问题了，我们需要把对应的静态资源也迁移过来，放置到可以正确访问的路径下即可， 这一步没什么难度，但因为迁移的项目复杂度不一样，替换的内容会多一点，多点耐心，哪个文件引入有问题就处理哪个文件即可。</p>\n<p>这步通常会遇到页面内引入资源包括但不限于：css文件，js文件，api方法文件，一般把B项目中用到的文件复制到A项目中即可解决。</p>\n<p>通常情况下，以上4步处理完，访问我们本次新增的路由后，页面已经可以打开，但是控制台会有很多报错，如下图：</p>\n<p><img src=\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2a987c34d2dc4295ba8a37916dca780a~tplv-k3u1fbpfcp-watermark.image\" alt=\"image.png\"></p>\n<p>已经看到胜利的曙光了！</p>\n<p>接下来就把控制台报错一个一个解决就行啦，这里的问题我统称为配置相关，即最后一步，也是最复杂的一部。</p>\n<h4 id=\"5-配置相关\"><a href=\"#5-配置相关\" class=\"headerlink\" title=\"5.配置相关\"></a>5.配置相关</h4><p><img src=\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/705efcba10be4ce4b7740e116c7361c2~tplv-k3u1fbpfcp-watermark.image\" alt=\"image.png\"></p>\n<p>这个报错是因为B项目使用axios请求方法和A项目的方法不一致，只要保证两个项目使用统一请求配置即可。</p>\n<p><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4753a47b5a3944e9ac898fb17842ef03~tplv-k3u1fbpfcp-watermark.image\" alt=\"image.png\"></p>\n<p>这种即为使用子组件未找到，看下components里是否缺失该组件，缺失的话补上即可。</p>\n<p>———-我是分割线———-</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>本次迁移需求为合并两个项目内容，节省服务器资源，减少跨项目跳转和相关配置的坑。<br>以上基本上是迁移的整个过程，仅供参考学习，有不足的地方也欢迎各位补充。</p></blockquote>\n","feature":true,"text":"最近整体架构变动中需要把某一个Vue项目（后面简称B项目）的部分内容迁移到项目A中，其中包含多个页面和功能，在此记录下。 先整体分析下有哪些内容需要迁移过来，大致思路是迁移页面的–&gt;路由模块–&gt;页面内容–&gt;依赖相关–&gt;静态资源–&gt;配置相关 下面开始开...","link":"","photos":[],"count_time":{"symbolsCount":"1.3k","symbolsTime":"1 mins."},"categories":[],"tags":[{"name":"日常记录","slug":"日常记录","count":4,"path":"api/tags/日常记录.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%85%88%E6%95%B4%E4%BD%93%E5%88%86%E6%9E%90%E4%B8%8B%E6%9C%89%E5%93%AA%E4%BA%9B%E5%86%85%E5%AE%B9%E9%9C%80%E8%A6%81%E8%BF%81%E7%A7%BB%E8%BF%87%E6%9D%A5%EF%BC%8C%E5%A4%A7%E8%87%B4%E6%80%9D%E8%B7%AF%E6%98%AF%E8%BF%81%E7%A7%BB%E9%A1%B5%E9%9D%A2%E7%9A%84\"><span class=\"toc-text\">先整体分析下有哪些内容需要迁移过来，大致思路是迁移页面的</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-router-%E8%B7%AF%E7%94%B1%E6%A8%A1%E5%9D%97\"><span class=\"toc-text\">1.router 路由模块</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#2-views%E9%A1%B5%E9%9D%A2%E5%86%85%E5%AE%B9\"><span class=\"toc-text\">2.views页面内容</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-%E4%BE%9D%E8%B5%96%E7%9B%B8%E5%85%B3\"><span class=\"toc-text\">3.依赖相关</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#4-%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90\"><span class=\"toc-text\">4.静态资源</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#5-%E9%85%8D%E7%BD%AE%E7%9B%B8%E5%85%B3\"><span class=\"toc-text\">5.配置相关</span></a></li></ol></li></ol>","author":{"name":"Dylan","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{},"next_post":{"title":"bpmn-compare","uid":"b5f2756a6fc815e7272f6737954d5877","slug":"bpmn-compare","date":"2022-08-04T09:34:00.000Z","updated":"2023-04-14T03:25:47.173Z","comments":true,"path":"api/articles/bpmn-compare.json","keywords":null,"cover":[],"text":"Activiti Modeler WebEditor（v5?）网上文档较少，也都很古老，经过考古整理如下： 这版应该是界面布局：上（工具区）、左（组件类目）、右（工作区）、右下（属性区） Activiti Modeler内部的实现上还是以oryx为图形组件为内核，用angular...","link":"","photos":[],"count_time":{"symbolsCount":"2.5k","symbolsTime":"2 mins."},"categories":[],"tags":[{"name":"日常记录","slug":"日常记录","count":4,"path":"api/tags/日常记录.json"}],"author":{"name":"Dylan","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true}}